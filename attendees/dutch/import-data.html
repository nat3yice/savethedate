<!DOCTYPE html>
<html lang='eng'>

<head>
  <script src="https://www.gstatic.com/firebasejs/4.9.1/firebase.js"></script>
  <script>
      var config = {
        databaseURL: "https://rsvp-dutch.firebaseio.com"
      };
      firebase.initializeApp(config);
      var database = firebase.database();
  </script>
  <meta charset='UTF-8'>
  <title>Importing data in Firebase in DUTCH</title>

</head>

<body>
    <!-- code;email@one.fr, email@two.fr; name 1, name 2, name 3; true-->
    <div id="content">
        bui;mrnathanbui@gmail.com,nikitarijgersberg@gmail.com;Nikita Rijgersberg,Nathan Bui;true
        schoenfather;jannitarijgersberg@hotmail.com,info@unieksieraad.nl;Ron Rijgersberg,Jannita Rijgersberg;false
        somsdandenkjeiets;danikerijgersberg@gmail.com;Danike Rijgersberg;false
        slowpie2;mirko@hostingsquad.nl,smeekuh@hotmail.com;Mirko Rijgersberg, Esmee Rijgersberg, Boris Rijgersberg;false
        gloeiendegloeiende;linda1961@live.nl,mart.mvl@gmail.com;Linda van Leeuwen, Mart van Leeuwen;false
        gabbertje;yoranvanleeuwen@gmail.com,marinavandrie@gmail.com;Yoran van Leeuwen,Marina van Drie;false
        coco;diannevanleeuwen@gmail.com,compeerb@gmail.com;Dianne van Leeuwen,Brent Compeer;false
        kriebeltante;mthvansolinge@gmail.com;Riet van Solinge;false
        loekagnes;loek-en-agnes@euro-assist.nl;Loek Freriks,Agnes Freriks;false
        dronkenaardbei;gwenvdhoogen@hotmail.com,mirjamwiechers@hotmail.com;Gwen van den Hoogen,Mirjam Wiechers;false
        kleinepiemel;femkejongbloed@hotmail.com,ivanvierbergen@gmail.com;Femke Jongbloed,Ivan Vierbergen;false
        ikgageenvestkopen;bwmkok@gmail.com,t.vanjole@gmail.com;Berdine Kok,Tom van Jole,Beer van Jole;false
        karaoke;elinehop@hotmail.com,versteegrob@hotmail.com;Eline Versteeg,Rob Versteeg;false
        chocola;charlottecremers87@hotmail.com,frankwaenink@gmail.com;Charlotte Cremers,Frank Waenink;false
        fomo;mirjamvanvelzen@gmail.com,gimondegraaf@gmail.com;Mirjam van Velzen,Gimon de Graaf;false
        teenieweeniegonewild;fjmverheul@gmail.com,breg@muijlaert.nl;Floor Verheul,Bregje Muijlaert;false
        broodjegarnaal;huismanrachel@gmail.com,bramvanderhoorn@gmail.com;Rachel Huisman,Bram van der Hoorn;false
        sjeesoonion;liekevds@gmail.com;Lieke van der Straten,Jasper de Haan;false
        blauwekaas;yvonnekoenraads@hotmail.com,rogierschippers@hotmail.com;Yvonne Koenraads,Rogier Schippers;false
        baarmoeder;jorijnk@hotmail.com;Jorijn Kamphof,Eelco Derkzen;false
        sylviemeis;biencuijpers@hotmail.com;Sabine Cuijpers;false
        grazia;ninakaper@hotmail.com;Nina Kaper;false
        courgette;francisvanlier@gmail.com;Francis van Lier,Koen van Francis;false
        roomie;suzannevmeer@gmail.com;Suzanne van Meer;false
        rookie;marjoleintje11@hotmail.com;Marjolein van Miltenburg;false
        arlington;marrit_hoekstra@hotmail.com;Marrit Hoekstra;false
        pechvogel;manonbouwens@hotmail.com;Manon Bouwens;false
        leuksteoppaskids;boumansuzanne@gmail.com,ejslob@tacktics.nl;Suzanne Slob,EJ Slob,Femke Slob,Bregje Slob,Jelleke Slob;false
        sharkie;sjroelofs@gmail.com,pampolman@gmail.com;Susan Polman,Pieter Polman;false
        japan;desireesikkens@gmail.com;Desiree Sikkens;false
        ninja;daan1012@icloud.com,degrauw52@gmail.com;Danielle van Dalen,Johan de Grauw;false
        ostrich;astrid.pascal@icloud.com;Astrid van Wijngaarden;false
        tinder;almasteenbergen7@gmail.com;Alma Steenbergen;false
        delaire;vanessalugthart@gmail.com,mhjbaas@me.com;Vanessa Lugthart,Mark Jan Baas;false
        schoenmaat45;leoniecschouten@gmail.com,tijnborms@gmail.com;Leonie Schouten,Tijn Borms;false
        roeien;manon.schouten@hotmail.com;Manon Schouten,Wesley Stolle;false
        kandijkoeken;kimberlydukker@gmail.com;Kimberly Dukker,Bram van Kimberly;false
        spagaat;yorinndukker@gmail.com;Yorinn Dukker;false
        oepsweereenblauweplek;kyrarobbemond@hotmail.com;Kyra Robbemond,Joeri van Kyra;false
        annekoen;ftcgroenewegen@hotmail.com;Femke Groenewegen,Mark van Veelen;false
        youarenext;elise_spruijt@hotmail.com;Elise Spruijt,Willem van Elise;false
        paaldanseres;cynthia.de.jager@hotmail.com;Cynthia de Jager;false
        alsofhetjelaatstedagis;esthervantok@outlook.com;Esther van Tok,Sander de Grauw;false
        picnic;babettevanson@gmail.com,rvanbarneveld@gmail.com;Babette van Son,Robert van Barneveld;false
        washington;artycoppes23@gmail.com;Max Coppes,Arty Coppes;false
        charlotte;marion.cremers@hotmail.com;Marion Cremers,Jos Cremers;false
        shits2meet;esmeekeuren@gmail.com,marcel@s2mstrijps.nl;Esmee Keuren,Marcel Nicolaas;false
        backstreetboys;bas@yourvp.tv;Bas van Brecht;false
        boris;mackenbach@wijvan10.nl;Ronnie Mackenbach,Robert Mackenbach;false
        tochnaarveenendaal;wendy.nieuwdorp@gmail.com;Wendy Nieuwdorp;false
        groningendebom;jolien_veraart@hotmail.com;Jolien Veraart;false
        loek;dejong.ame@gmail.com;Anna de Jong;false
        moffelwoord;le.dewit@gmail.com;Laura de Wit;false
        colalight;merel.schreuder@gmail.com;Merel Schreuder;false
        auping;hansvanmierlo@outlook.com;Hans van Mierlo;false
        beyonce;naeem.juliana@gmail.com;Naeem Juliana;false
        ineklijn;sisco_p@hotmail.com;Sisco van Veen;false
        caprese;jonaslaschen@hotmail.com;Jonas Laschen;false
        piketkamer;basoudeophuis@hotmail.com;Bas Oude Ophuis;false
        ohohdenhaag;carianne2010@hotmail.com;Carianne l'Abee;false
        bluesbrothers;femke.lambers@gmail.com;Femke Lambers;false
        singledogs;violetvandee@hotmail.com;Violet van Dee;false
        pianoman;gideonvangelder@gmail.com;Gideon van Gelder;false
        toniecoen;ruud.westerbeek@gmail.com,marlies.hilbolling@gmail.com;Marlies Hilbolling,Ruud Westerbeek;false
        maria;h.j.a.scholtens@gmail.com;Anko Scholtens;false
        naaddan;michael@amacies.com;Michael Pijnenburg;false
        scheetje;pimbaljon@gmail.com;Pim Baljon;false
        koekoek;swenmulderij@gmail.com,kyradelsing@gmail.com;Swen Mulderij,Kyra Delsing;false
        vietnam;rkaipatty@hotmail.com,jantinevandenberg@hotmail.com;Ruben Kaipatty,Jantine van den Berg;false

    </div>

    <script>
        function extractFromList(nameList){
            var nameArray = nameList.split(",");
            var names = [];
            for(var i = 0; i < nameArray.length; i++){
                names.push(nameArray[i].trim());
            }
            return names;
        }

        function convertToNameObjects(nameArray){
            for(var i = 0; i < nameArray.length; i++) {
                nameArray[i] = {"name": nameArray[i]};
            }
            return nameArray;
        }

            var data = document.getElementById("content").textContent;
            var lines = data.split("\n");
            for(var i =0; i < lines.length; i++){
                var line = lines[i].trim();
                if(line.length === 0){
                    console.log('line ', i, ' was empty');
                }
                else{
                    console.log(line);
                    var elements = line.split(";");
                    if(elements.length !=4 ) {
                        console.log('following line is not correctly formatted, skipping : ',  line);
                        continue;
                    }
                    var key = elements[0].trim();
                    var emails = extractFromList(elements[1]);
                    var names = convertToNameObjects(extractFromList(elements[2]));
                    var isAmerican = (elements[3].trim() == 'true');
                    console.log('saving ', key);
                    firebase.database().ref('attendees/' + key).set({
                        emails: emails,
                        names: names,
                        isAmerican : isAmerican
                    });

                }
            }
            alert("Finito!");
    </script>
</body>
</html>
